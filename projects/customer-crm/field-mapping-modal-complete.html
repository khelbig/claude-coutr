<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import Customers - Field Mapping</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f5f7;
            color: #1d1d1f;
            line-height: 1.6;
            padding: 40px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* Modal Container */
        .modal-container {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 900px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Modal Header */
        .modal-header {
            padding: 24px 32px;
            border-bottom: 1px solid #f0f0f2;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .modal-title h2 {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .btn-template {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e8e8ea;
            background: white;
            color: #1d1d1f;
        }

        .btn-template:hover {
            background: #f5f5f7;
            border-color: #007aff;
        }

        .close-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f5f5f7;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #e8e8ea;
            transform: rotate(90deg);
        }

        /* Stepper */
        .stepper-container {
            padding: 24px 32px;
            background: #f8f8fa;
            border-bottom: 1px solid #f0f0f2;
        }

        .stepper {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .step {
            display: flex;
            align-items: center;
            position: relative;
        }

        .step-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e8e8ea;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 600;
            color: #86868b;
            transition: all 0.2s;
        }

        .step.completed .step-circle {
            background: #0a7c42;
            color: white;
        }

        .step.active .step-circle {
            background: #007aff;
            color: white;
        }

        .step-label {
            margin-left: 8px;
            font-size: 13px;
            color: #86868b;
        }

        .step.completed .step-label,
        .step.active .step-label {
            color: #1d1d1f;
            font-weight: 500;
        }

        .step-connector {
            width: 60px;
            height: 2px;
            background: #e8e8ea;
            margin: 0 16px;
        }

        .step.completed + .step-connector {
            background: #0a7c42;
        }

        /* Modal Body */
        .modal-body {
            padding: 24px 32px;
            max-height: 60vh;
            overflow-y: auto;
        }

        /* Instructions */
        .instructions {
            background: #e8f4ff;
            border-left: 4px solid #007aff;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .instructions p {
            font-size: 14px;
            color: #1d1d1f;
        }

        /* Auto-Map Button */
        .auto-map-container {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 16px;
        }

        .btn-auto-map {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #007aff;
            background: white;
            color: #007aff;
        }

        .btn-auto-map:hover {
            background: #007aff;
            color: white;
        }

        /* Mapping Table */
        .mapping-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border: 1px solid #e8e8ea;
            border-radius: 12px;
            overflow: hidden;
        }

        .mapping-table thead {
            background: #f8f8fa;
        }

        .mapping-table th {
            text-align: left;
            padding: 12px 16px;
            font-size: 12px;
            font-weight: 600;
            color: #86868b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid #e8e8ea;
        }

        .mapping-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #f0f0f2;
        }

        .mapping-table tbody tr {
            transition: background 0.2s;
        }

        .mapping-table tbody tr:hover {
            background: #f8f8fa;
        }

        /* Column Info */
        .column-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .column-name {
            font-size: 14px;
            font-weight: 500;
            color: #1d1d1f;
        }

        .sample-data {
            font-size: 12px;
            color: #86868b;
            font-style: italic;
        }

        /* Arrow */
        .mapping-arrow {
            text-align: center;
            color: #86868b;
            font-size: 18px;
        }

        /* Select Dropdown */
        .field-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #e8e8ea;
            border-radius: 6px;
            background: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .field-select:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 3px rgba(0,122,255,0.1);
        }

        .field-select.mapped {
            background: #e8f4ff;
            border-color: #007aff;
        }

        .field-select option {
            padding: 8px;
        }

        /* Mapping Stats */
        .mapping-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f8f8fa;
            border-radius: 8px;
            margin-top: 24px;
        }

        .stats-left {
            display: flex;
            gap: 24px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-label {
            font-size: 13px;
            color: #86868b;
        }

        .stat-value {
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .stat-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 24px;
            height: 24px;
            padding: 0 6px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .stat-badge.mapped {
            background: #d4f4dd;
            color: #0a7c42;
        }

        .stat-badge.required {
            background: #fff8f0;
            color: #ff9500;
        }

        .stat-badge.unmapped {
            background: #f0f0f2;
            color: #86868b;
        }

        /* Required Field Indicator */
        .required-indicator {
            color: #d73502;
            font-weight: 600;
        }

        /* Modal Footer */
        .modal-footer {
            padding: 20px 32px;
            border-top: 1px solid #f0f0f2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f8fa;
        }

        .btn-group {
            display: flex;
            gap: 12px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .btn-secondary {
            background: white;
            color: #1d1d1f;
            border: 1px solid #e8e8ea;
        }

        .btn-secondary:hover {
            background: #f5f5f7;
        }

        .btn-primary {
            background: #007aff;
            color: white;
        }

        .btn-primary:hover {
            background: #0051d5;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,122,255,0.3);
        }

        .btn-primary:disabled {
            background: #86868b;
            cursor: not-allowed;
            transform: none;
        }

        /* Scrollbar Styling */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: #f0f0f2;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #86868b;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #1d1d1f;
        }
    </style>
</head>
<body>
    <div class="modal-container">
        <!-- Modal Header -->
        <div class="modal-header">
            <div class="header-left">
                <div class="modal-title">
                    <h2>Import Customers</h2>
                </div>
                <button class="btn-template">
                    <svg width="14" height="14" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34Z"></path>
                    </svg>
                    Download Template
                </button>
            </div>
            <button class="close-btn">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path>
                </svg>
            </button>
        </div>

        <!-- Stepper -->
        <div class="stepper-container">
            <div class="stepper">
                <div class="step completed">
                    <div class="step-circle">✓</div>
                    <span class="step-label">Upload File</span>
                </div>
                <div class="step-connector"></div>
                <div class="step active">
                    <div class="step-circle">2</div>
                    <span class="step-label">Map Fields</span>
                </div>
                <div class="step-connector"></div>
                <div class="step">
                    <div class="step-circle">3</div>
                    <span class="step-label">Preview & Import</span>
                </div>
            </div>
        </div>

        <!-- Modal Body -->
        <div class="modal-body">
            <!-- Instructions -->
            <div class="instructions">
                <p><strong>Map your file columns to customer database fields.</strong> Required fields are marked with an asterisk (*). The system will automatically skip unmapped columns.</p>
            </div>

            <!-- Auto-Map Button -->
            <div class="auto-map-container">
                <button class="btn-auto-map" onclick="autoMap()">
                    <svg width="14" height="14" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M200,24H72A16,16,0,0,0,56,40V64H40A16,16,0,0,0,24,80V208a16,16,0,0,0,16,16H168a16,16,0,0,0,16-16V184h16a16,16,0,0,0,16-16V40A16,16,0,0,0,200,24ZM168,208H40V80H168ZM200,168H184V80a16,16,0,0,0-16-16H72V40H200Z"></path>
                    </svg>
                    Auto-Map Fields
                </button>
            </div>

            <!-- Mapping Table -->
            <table class="mapping-table">
                <thead>
                    <tr>
                        <th style="width: 35%;">File Column</th>
                        <th style="width: 30%;">Sample Data</th>
                        <th style="width: 5%; text-align: center;"></th>
                        <th style="width: 30%;">Database Field</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">ShopifyId</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">7998690033860</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="shopify_id" selected>Shopify ID</option>
                                <option value="external_id">External ID</option>
                                <option value="custom_id">Custom ID</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">First Name</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">John</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="first_name" selected>First Name</option>
                                <option value="given_name">Given Name</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Last Name</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">Doe</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="last_name" selected>Last Name</option>
                                <option value="surname">Surname</option>
                                <option value="family_name">Family Name</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Email</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">john.doe@example.com</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="email" selected>Email <span class="required-indicator">*</span></option>
                                <option value="email_address">Email Address</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Phone</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">+1 555-0123</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="phone" selected>Primary Phone</option>
                                <option value="mobile">Mobile Phone</option>
                                <option value="work_phone">Work Phone</option>
                                <option value="shipping_phone">Shipping Phone</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Accepts Email Marketing</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">yes</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="accepts_marketing" selected>Accepts Marketing</option>
                                <option value="email_opt_in">Email Opt-in</option>
                                <option value="newsletter">Newsletter Subscription</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Default Address Company</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">Acme Corp</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select">
                                <option value="">-- Select field --</option>
                                <option value="company">Company</option>
                                <option value="organization">Organization</option>
                                <option value="business_name">Business Name</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Default Address City</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">Los Angeles</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="city" selected>Billing City</option>
                                <option value="shipping_city">Shipping City</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Default Address Country Code</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">US</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="country_code" selected>Billing Country Code</option>
                                <option value="shipping_country">Shipping Country Code</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Tags</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">newsletter, vip</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="tags" selected>Tags</option>
                                <option value="labels">Labels</option>
                                <option value="categories">Categories</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="column-info">
                                <span class="column-name">Sales Channel</span>
                            </div>
                        </td>
                        <td>
                            <span class="sample-data">Shopify</span>
                        </td>
                        <td class="mapping-arrow">→</td>
                        <td>
                            <select class="field-select mapped">
                                <option value="">-- Select field --</option>
                                <option value="origin_channel" selected>Origin Channel</option>
                                <option value="source">Source</option>
                                <option value="acquisition_channel">Acquisition Channel</option>
                            </select>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Mapping Stats -->
            <div class="mapping-stats">
                <div class="stats-left">
                    <div class="stat-item">
                        <span class="stat-label">Total Columns:</span>
                        <span class="stat-value">20</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Mapped:</span>
                        <span class="stat-badge mapped">10</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Required:</span>
                        <span class="stat-badge required">1</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Unmapped:</span>
                        <span class="stat-badge unmapped">10</span>
                    </div>
                </div>
                <div class="stats-right">
                    <span style="font-size: 13px; color: #86868b;">
                        ✓ All required fields mapped
                    </span>
                </div>
            </div>
        </div>

        <!-- Modal Footer -->
        <div class="modal-footer">
            <button class="btn btn-secondary">Back</button>
            <div class="btn-group">
                <button class="btn btn-secondary">Reset Mapping</button>
                <button class="btn btn-primary">Next: Preview</button>
            </div>
        </div>
    </div>

    <script>
        // Auto-map functionality
        function autoMap() {
            const selects = document.querySelectorAll('.field-select:not(.mapped)');
            selects.forEach(select => {
                // Simulate auto-mapping by adding the mapped class
                select.classList.add('mapped');
                // Select first available option
                if (select.options.length > 1) {
                    select.selectedIndex = 1;
                }
            });
            updateStats();
        }

        // Update stats when mapping changes
        document.querySelectorAll('.field-select').forEach(select => {
            select.addEventListener('change', function() {
                if (this.value) {
                    this.classList.add('mapped');
                } else {
                    this.classList.remove('mapped');
                }
                updateStats();
            });
        });

        function updateStats() {
            const total = document.querySelectorAll('.field-select').length;
            const mapped = document.querySelectorAll('.field-select.mapped').length;
            const unmapped = total - mapped;
            
            document.querySelector('.stat-badge.mapped').textContent = mapped;
            document.querySelector('.stat-badge.unmapped').textContent = unmapped;
        }
    </script>
</body>
</html>